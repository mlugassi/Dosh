<div class="col-lg-12 left-blog-info-w3layouts-agileits text-left">
  <div class="blog-grid-top">
    <div class="b-grid-top">
      <div class="blog_info_left_grid">
        <img *ngIf="blog" src="{{blog.imgPath}}" class="img-fluid" alt="">
      </div>
      <div class="blog-info-middle">
        <ul>
          <li *ngIf="blog">
            <i class="far fa-calendar-alt"> {{blog.created_at}}</i>
          </li>
          <li *ngIf="blog" class="mx-2">
            <i class="far fa-thumbs-up" (click)="doLikeBlog()" [ngClass]="blog.likes.users.includes(watcher) ? 'clicked' : ''"> {{blog.likes.count}} Likes</i>
          </li>
          <li *ngIf="blog" class="mx-2">
            <i class="far fa-thumbs-down" (click)="doUnlikeBlog()" [ngClass]="blog.unlikes.users.includes(watcher) ? 'clicked' : ''"> {{blog.unlikes.count}} Unlikes</i>
          </li>
          <li>
            <i class="far fa-comment"> {{blog.comments.count}} Comments</i>
          </li>

        </ul>
      </div>
    </div>

    <h2 *ngIf="blog">
      {{blog.title}}
    </h2>
    <p *ngIf="blog">
      {{blog.content}}
    </p>
  </div>
  <div *ngIf="blog" class="comment-top">
    <h4>Comments</h4>
    <div *ngIf="blog.comments && blog.comments.comment">
      <div *ngFor="let comment of blog.comments.comment" class="media">
        <div>
          <img src="{{comment.imgPath}}" height="70px" width="70px" alt="" class="img-fluid" />
        </div>
        <div class="media-body">
          <h5 class="mt-0">{{comment.writer}}</h5>
          <div>
            <p>{{comment.content}}</p>
            <div class="comment">
              <i class="far fa-thumbs-up" (click)="doLikeComment(comment._id)" [ngClass]="comment.likes.users.includes(watcher) ? 'clicked' : ''">
                {{comment.likes.count}}</i>
              <i class="far fa-thumbs-down" (click)="doUnlikeComment(comment._id)" [ngClass]="comment.unlikes.users.includes(watcher) ? 'clicked' : ''">
                {{comment.unlikes.count}}</i>
              <i class="far fa-comment collapse" data-toggle="collapse" [attr.data-target]="'#'+comment._id"> {{comment.replies.count}}</i>
              <i class="far fa-clock"> {{ comment.created_at | date: 'LLL d, y HH:mm'}}</i>
            </div>
          </div>


          <div *ngIf="comment.replies">
            <div *ngFor="let reply of comment.replies" class="media mt-3">
              <a class="d-flex pr-3">
                <img src="{{reply.imgPath}}" alt="" height="70px" width="70px" class="img-fluid" />
              </a>
              <div class="media-body">
                <h5 class="mt-0">{{reply.writer}}</h5>
                <p>{{reply.content}}</p>
                <div class="comment">
                  <i class="far fa-thumbs-up" (click)="doLikeReply(comment._id, reply._id)" [ngClass]="reply.likes.users.includes(watcher) ? 'clicked' : ''">
                    {{reply.likes.count}}</i>
                  <i class="far fa-thumbs-down" (click)="doUnlikeReply(comment._id, reply._id)" [ngClass]="reply.unlikes.users.includes(watcher) ? 'clicked' : ''">
                    {{reply.unlikes.count}}</i>
                  <i class="far fa-clock"> {{reply.created_at | date: 'LLL d, y HH:mm'}}</i>
                </div>
              </div>
            </div>
            <div id="{{comment._id}}" class="comment-bottom collapse">
              <div class="row">
                <div class="col-lg-2">
                  <img src="{{imgPath}}" height="70px" width="70px" alt="" class="img-fluid" />
                </div>
                <div class="col-lg-10">
                  <textarea id="rply_{{comment._id}}" class="form-control " placeholder="Write a reply..."></textarea>
                  <button type="submit" class="btn btn-primary submit" data-toggle="collapse" [attr.data-target]="'#'+comment._id" (click)="addReply(comment._id)">Submit</button>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
  <div class="comment-top">
    <div class="comment-bottom">
      <div class="row">
        <div class="col-lg-2">
          <img src="{{imgPath}}" height="70px" width="70px" alt="" class="img-fluid" />
        </div>
        <div class="col-lg-10">
          <textarea id="cmt" class="form-control" placeholder="Write a comment..."></textarea>
          <button type="submit" class="btn btn-primary submit" (click)="addComment()">Submit</button>
        </div>
      </div>
    </div>
  </div>
</div>