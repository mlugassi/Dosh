<div class="container">
  <div class="row">
    <div class="col-md-9 ">
      <div class="chatHeader">
        <div *ngIf="room" class="row">
          <div class="col-sm-2 col-md-1">
            <img src="/images/blogs/3.jpg">
          </div>
          <div class="col-sm-8 col-md-9">
            <h2>title</h2>
          </div>
          <div class="col-sm-2 col-md-2">
            <i class="btn fas fa-sign-out-alt" ngbTooltip="Leave this room" (click)="leave()"></i>
          </div>
        </div>
        <h2 *ngIf="!room">Please pick up one chat</h2>
      </div>
      <div class="frame">
        <div #scrollMe (scroll)="onScroll()">
          <app-chat-message *ngFor="let item of messages" [message]="item" [userName]=user [room]=room (loadMessage)="load_messages()"></app-chat-message>
          <div class="srchBar">
            <div>
              <input type="text" placeholder="Search" [(ngModel)]="expression" (input)="search()" (keyup.enter)="search()">
              <i class="btn btn-circle fas fa-chevron-left"></i>
              <i class="btn btn-circle fas fa-chevron-right"></i>
            </div>
          </div>
        </div>
      </div>
      <div class="chat-func clearfix">
        <div class="msj-rta macro">
          <div class="text text-r">
            <input class="mytext" placeholder="Type a message" [(ngModel)]="text" (keyup.enter)="send_message()" />
          </div>

          <div class="btns">
            <button class="btn  far fa-image btn-circle imgBtn" (click)="file.click()"></button>
            <input type="file" (change)="onFileChange($event.target.files)" hidden="hidden" accept="image/*" #file/>
          </div>
          <div class="btns">
            <button class=" btn btn-info fas fa-paper-plane btn-circle btn-lg sendBtn" (click)="send_message()"></button>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3">

      <nav class="navTab">
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
          <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-rooms" role="tab" aria-controls="nav-rooms"
            aria-selected="true">Active Rooms</a>
          <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-users" role="tab" aria-controls="nav-users"
            aria-selected="false">Users</a>
        </div>
      </nav>
      <div class="tab-content sidebar" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-rooms" role="tabpanel" aria-labelledby="nav-home-tab">
          <div *ngFor="let chat of chats" [ngClass]="chat.id==room ? 'row chatRow active' : 'row chatRow'" (click)="openChat(chat.id);">
            <div class="col-md-2 col-sm-1">
              <img class="rowImg" src={{chat.imgPath}}>
            </div>
            <div class="col-md-10 col-sm-11 blogRowTitle">
              <h5>
                {{chat.title}}
              </h5>
              <div>
                <i class="fas fa-user"> </i> {{chat.owner}}
                <i class="far fa-thumbs-up blogLikes"> {{chat.likes}}</i>
                <i class="far fa-thumbs-down blogLikes"> {{chat.unlikes}}</i>
              </div>
            </div>
          </div>
        </div>
        <div class="tab-pane fade" id="nav-users" role="tabpanel" aria-labelledby="nav-profile-tab">
          <div *ngFor="let user of connectedUsers" class="row chatRow">
            <div class="col-md-2 col-sm-1">
              <img class="rowImg" src={{user.imgPath}}>
            </div>
            <div class="col-md-10 col-sm-11 userRowTitle">
              <h5>
                {{user.userName}}
              </h5>
            </div>
          </div>
        </div>
      </div>
      <div class="newRoomsBtn">
        <button class="btn joinRoomBtn" data-toggle="modal" data-target="#myModal"> Join New Room</button>
      </div>
    </div>
  </div>
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog joinRoomDialog">
      <div class="modal-content">
        <div class="modal-body">
          <div class="joinRoomBorder">
            <div class="row chatRow">
              <div class="col-md-2 col-sm-1">
                <img class="rowImg" src="">
              </div>
              <div class="col-md-8 col-sm-8 blogRowTitle">
                <h5>
                  title
                </h5>
                <div>
                  <i class="fas fa-user"> </i> owner
                  <i class="far fa-thumbs-up blogLikes"> 5</i>
                  <i class="far fa-thumbs-down blogLikes"> 6</i>
                </div>
              </div>
              <div class="col-md-1 col-sm-1">
                <input type="checkbox" style="position: relative; top: 25%">
              </div>
            </div>
          </div>
        </div>
        <div style="text-align: center; margin: 0 5px 20px">
          <button class="btn joinRoomBtn" data-dismiss="modal">Join</button>
        </div>
      </div>
    </div>
  </div>
</div>